---
title: "main.Rmd"
author: "Alain Cl√©ment-Pavon"
date: "19 janvier 2015"
output: html_document
---

Example of `modulr` use within an R Markdown document and `knitr`.

```{r libraries}
library(modulr)
```


```{r configuration}
paths_config$set(
  "unisis" = "lib/unisis"
  )

"unisis/dwh/get_connection" %has_option% list(
   #stage = "dev"
  )
```

```{r definition}
# Main module
.main <- "main" %requires% list("unisis/dwh/raw/table") %provides%
  function(raw_table) {
    all_tables <<- raw_table$get_all()
    rawub <<- raw_table$get("UB")
#    rawadresses <<- raw_table$get("ADRESSES")
    NULL
  }
```

```{r instanciation}
.main()
#all_tables=data.frame(a=1)
#rawub=data.frame(b=2)
```

```{r}
print(all_tables)
```

```{r}
str(rawub)
```

```{r}
#print(head(rawadresses))
```

```{r}
toto <- "toto" %provides% (
  toto_factory <- function() {
    "Hello World"
    })

```

