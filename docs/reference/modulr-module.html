<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Special Module <code>'modulr'</code> — modulr-module • modulr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36176577-2', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">modulr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/motivation.html">Why DI for R?</a>
</li>
<li>
  <a href="../articles/modulr.html">Introduction</a>
</li>
<li>
  <a href="../articles/testing.html">Unit Testing</a>
</li>
<li>
  <a href="../articles/packages.html">Using modulr in packages</a>
</li>
<li>
  <a href="../articles/experimental.html">Experimental</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/aclemen1/modulr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Special Module <code>'modulr'</code></h1>
    </div>

    
    <p>Access module helper functions.</p>
    

        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>A list of functions.</p><pre>
post_evaluation_hook(expr, add = FALSE)
message_info(...)
message_warn(...)
message_stop(...)
    ## Deprecated ##
get_module_name()
get_module_options()
get_filename()
get_dirname()</pre>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The purpose of the special module <code>'modulr'</code> is to give access
to useful helper functions related to the module into which it is injected.</p>
    
    <h2 class="hasAnchor" id="-code-post-evaluation-hook-expr-add-false-code-"><a class="anchor" href="#-code-post-evaluation-hook-expr-add-false-code-"></a>&lt;code&gt;post_evaluation_hook(expr, add = FALSE)&lt;/code&gt;</h2>

    
    <p>Records the expression given as its argument as needing to be executed when
the current module evaluation exits (either naturally or as the result of an
error). If no expression is provided, i.e., the call is
`post_evaluation_hook()`, then the current expression is removed. If `add` is
`TRUE`, `expr` is added after any previously set expressions; otherwise (the
default) `expr` will overwrite any previously set expressions.</p>
    
    <h2 class="hasAnchor" id="-code-message-info-message-warn-and-message-stop-code-"><a class="anchor" href="#-code-message-info-message-warn-and-message-stop-code-"></a>&lt;code&gt;message_info(...), message_warn(...), and message_stop(...)&lt;/code&gt;</h2>

    
    <p>Outputs an informative, warning, or critical and stopping message, prefixed
with a timestamp and the module name. Such messages are particularily useful
in modules involved in long chains of dependencies and workflows.</p>
    
    <h2 class="hasAnchor" id="-code-get-module-name-code-"><a class="anchor" href="#-code-get-module-name-code-"></a>&lt;code&gt;get_module_name()&lt;/code&gt;</h2>

    
    <p>Returns a string (character vector of lenght one) containing the module name.
See <code><a href='define.html'>define</a></code>. <b>Deprecated and kept for backward
compatibility.</b></p>
    
    <h2 class="hasAnchor" id="-code-get-module-version-code-"><a class="anchor" href="#-code-get-module-version-code-"></a>&lt;code&gt;get_module_version()&lt;/code&gt;</h2>

    
    <p>Returns numeric version of the module. <b>Deprecated and kept for backward
compatibility.</b></p>
    
    <h2 class="hasAnchor" id="-code-get-module-options-code-"><a class="anchor" href="#-code-get-module-options-code-"></a>&lt;code&gt;get_module_options()&lt;/code&gt;</h2>

    
    <p>Returns a list containing the module options. See
<code><a href='module_options.html'>module_options</a></code>. <b>Deprecated and kept for backward
compatibility.</b></p>
    
    <h2 class="hasAnchor" id="-code-get-filename-absolute-true-code-"><a class="anchor" href="#-code-get-filename-absolute-true-code-"></a>&lt;code&gt;get_filename(absolute = TRUE)&lt;/code&gt;</h2>

    
    <p>Returns a string (character vector of lenght one) containing the module
(absolute) filename. <b>Deprecated and kept for backward
compatibility.</b></p>
    
    <h2 class="hasAnchor" id="-code-get-dirname-absolute-true-code-"><a class="anchor" href="#-code-get-dirname-absolute-true-code-"></a>&lt;code&gt;get_dirname(absolute = TRUE)&lt;/code&gt;</h2>

    
    <p>Returns a string (character vector of lenght one) containing the module
(absolute) dirname. <b>Deprecated and kept for backward
compatibility.</b></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='define.html'>define</a></code>, <code><a href='module_options.html'>module_options</a></code>, and
  <code><a href='reset.html'>reset</a></code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='reset.html'>reset</a></span>()
<span class='fu'><a href='define.html'>define</a></span>(<span class='st'>"foo"</span>, <span class='fu'>list</span>(<span class='kw'>modulr</span> <span class='kw'>=</span> <span class='st'>"modulr"</span>), <span class='kw'>function</span>(<span class='no'>modulr</span>) {
  <span class='fu'>list</span>(
    <span class='kw'>info</span> <span class='kw'>=</span> <span class='kw'>function</span>() <span class='no'>modulr</span>$<span class='fu'>message_info</span>(<span class='st'>"Module name: "</span>, <span class='no'>.__name__</span>),
    <span class='kw'>warn</span> <span class='kw'>=</span> <span class='kw'>function</span>() <span class='no'>modulr</span>$<span class='fu'>message_warn</span>(<span class='st'>"Module name: "</span>, <span class='no'>.__name__</span>),
    <span class='kw'>stop</span> <span class='kw'>=</span> <span class='kw'>function</span>() <span class='no'>modulr</span>$<span class='fu'>message_stop</span>(<span class='st'>"Module name: "</span>, <span class='no'>.__name__</span>)
  )
})</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Defining 'foo' ... OK</div><div class='input'><span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='make.html'>make</a></span>()</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Making 'foo' ...
#&gt; [2018-10-25T22:57:49 CEST] * Visiting and defining dependencies ...
#&gt; [2018-10-25T22:57:49 CEST] * Constructing dependency graph ... OK
#&gt; [2018-10-25T22:57:49 CEST] * Evaluating #1/1 (layer #1/1): 'modulr#0.1.7.9204' ...
#&gt; [2018-10-25T22:57:49 CEST] DONE ('foo' in 0.071 secs)</div><div class='input'><span class='no'>foo</span>$<span class='fu'><a href='print_info.html'>info</a></span>()</div><div class='output co'>#&gt; <span class='message'>[2018-10-25T22:57:49 CEST foo] Module name: foo</span></div><div class='input'><span class='no'>foo</span>$<span class='fu'>warn</span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: [2018-10-25T22:57:49 CEST foo] Module name: foo</span></div><div class='input'>
<span class='fu'><a href='reset.html'>reset</a></span>()</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Resetting modulr state ... OK</div><div class='input'><span class='no'>tmp_dir</span> <span class='kw'>&lt;-</span> <span class='fu'>tempfile</span>(<span class='st'>"modulr_"</span>)
<span class='fu'>dir.create</span>(<span class='no'>tmp_dir</span>)
<span class='no'>tmp_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>tmp_dir</span>, <span class='st'>"foo.R"</span>)
<span class='fu'>cat</span>(
<span class='st'>'define("foo", list(modulr = "modulr"), function(modulr) {
  modulr$message_info("Module file name: ", .__file__)
  modulr$message_info("Module file path: ", .__path__)
})'</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"\n"</span>, <span class='kw'>file</span> <span class='kw'>=</span> <span class='no'>tmp_file</span>)
<span class='no'>root_config</span>$<span class='fu'><a href='config.html'>set</a></span>(<span class='no'>tmp_dir</span>)
<span class='fu'><a href='make.html'>make</a></span>(<span class='st'>"foo"</span>)</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Making 'foo' ...
#&gt; [2018-10-25T22:57:49 CEST] * Visiting and defining dependencies ...
#&gt; [2018-10-25T22:57:49 CEST] ** Defining 'foo' ... OK
#&gt; [2018-10-25T22:57:49 CEST] * Constructing dependency graph ... OK
#&gt; [2018-10-25T22:57:49 CEST] * Evaluating #1/1 (layer #1/1): 'modulr#0.1.7.9204' ...</div><div class='output co'>#&gt; <span class='message'>[2018-10-25T22:57:49 CEST foo] * Module file name: /tmp/RtmpWCwr6R/modulr_3f1c52e42875/foo.R</span></div><div class='output co'>#&gt; <span class='message'>[2018-10-25T22:57:49 CEST foo] * Module file path: /tmp/RtmpWCwr6R/modulr_3f1c52e42875</span></div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] DONE ('foo' in 0.082 secs)</div><div class='input'><span class='fu'>unlink</span>(<span class='no'>tmp_dir</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'>## Not run: foo$stop()</span>

<span class='fu'><a href='reset.html'>reset</a></span>()</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Resetting modulr state ... OK</div><div class='input'><span class='st'>"foo"</span> <span class='kw'>%requires%</span> <span class='fu'>list</span>(<span class='kw'>modulr</span> <span class='kw'>=</span> <span class='st'>"modulr"</span>) <span class='kw'>%provides%</span> {
  <span class='no'>modulr</span>$<span class='fu'>post_evaluation_hook</span>(<span class='fu'><a href='touch.html'>touch</a></span>(<span class='st'>"foo"</span>))
  <span class='fu'>message</span>(<span class='st'>"Hello, I am a "</span>, <span class='fu'>sQuote</span>(<span class='st'>"no-scoped"</span>), <span class='st'>" module."</span>)
}</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Defining 'foo' ... OK</div><div class='input'><span class='fu'><a href='make.html'>make</a></span>(<span class='st'>"foo"</span>)</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Making 'foo' ...
#&gt; [2018-10-25T22:57:49 CEST] * Visiting and defining dependencies ...
#&gt; [2018-10-25T22:57:49 CEST] * Constructing dependency graph ... OK
#&gt; [2018-10-25T22:57:49 CEST] * Evaluating #1/1 (layer #1/1): 'modulr#0.1.7.9204' ...</div><div class='output co'>#&gt; <span class='message'>Hello, I am a ‘no-scoped’ module.</span></div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] * Touching 'foo' ... OK
#&gt; [2018-10-25T22:57:49 CEST] DONE ('foo' in 0.11 secs)</div><div class='input'><span class='fu'><a href='make.html'>make</a></span>(<span class='st'>"foo"</span>)</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Making 'foo' ...
#&gt; [2018-10-25T22:57:49 CEST] * Visiting and defining dependencies ...
#&gt; [2018-10-25T22:57:49 CEST] * Constructing dependency graph ... OK</div><div class='output co'>#&gt; <span class='message'>Hello, I am a ‘no-scoped’ module.</span></div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] * Touching 'foo' ... OK
#&gt; [2018-10-25T22:57:49 CEST] DONE ('foo' in 0.077 secs)</div><div class='input'>
<span class='fu'><a href='reset.html'>reset</a></span>()</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Resetting modulr state ... OK</div><div class='input'><span class='st'>"foo"</span> <span class='kw'>%requires%</span> <span class='fu'>list</span>(<span class='kw'>modulr</span> <span class='kw'>=</span> <span class='st'>"modulr"</span>) <span class='kw'>%provides%</span> {
  <span class='no'>modulr</span>$<span class='fu'>post_evaluation_hook</span>(<span class='fu'><a href='undefine.html'>undefine</a></span>(<span class='st'>"foo"</span>))
  <span class='fu'>message</span>(<span class='st'>"Hello, I am an "</span>, <span class='fu'>sQuote</span>(<span class='st'>"ephemeral"</span>), <span class='st'>" module."</span>)
}</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Defining 'foo' ... OK</div><div class='input'><span class='fu'><a href='make.html'>make</a></span>(<span class='st'>"foo"</span>)</div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] Making 'foo' ...
#&gt; [2018-10-25T22:57:49 CEST] * Visiting and defining dependencies ...
#&gt; [2018-10-25T22:57:49 CEST] * Constructing dependency graph ... OK
#&gt; [2018-10-25T22:57:49 CEST] * Evaluating #1/1 (layer #1/1): 'modulr#0.1.7.9204' ...</div><div class='output co'>#&gt; <span class='message'>Hello, I am an ‘ephemeral’ module.</span></div><div class='output co'>#&gt; [2018-10-25T22:57:49 CEST] * Undefining 'foo' ... OK
#&gt; [2018-10-25T22:57:49 CEST] DONE ('foo' in 0.077 secs)</div><div class='input'>## Not run: make("foo")

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#-code-post-evaluation-hook-expr-add-false-code-">&lt;code&gt;post_evaluation_hook(expr, add = FALSE)&lt;/code&gt;</a></li>

      <li><a href="#-code-message-info-message-warn-and-message-stop-code-">&lt;code&gt;message_info(...), message_warn(...), and message_stop(...)&lt;/code&gt;</a></li>

      <li><a href="#-code-get-module-name-code-">&lt;code&gt;get_module_name()&lt;/code&gt;</a></li>

      <li><a href="#-code-get-module-version-code-">&lt;code&gt;get_module_version()&lt;/code&gt;</a></li>

      <li><a href="#-code-get-module-options-code-">&lt;code&gt;get_module_options()&lt;/code&gt;</a></li>

      <li><a href="#-code-get-filename-absolute-true-code-">&lt;code&gt;get_filename(absolute = TRUE)&lt;/code&gt;</a></li>

      <li><a href="#-code-get-dirname-absolute-true-code-">&lt;code&gt;get_dirname(absolute = TRUE)&lt;/code&gt;</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alain Clément-Pavon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
